(function(e){function t(t){for(var o,s,n=t[0],i=t[1],u=t[2],m=0,p=[];m<n.length;m++)s=n[m],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);c&&c(t);while(p.length)p.shift()();return l.push.apply(l,u||[]),r()}function r(){for(var e,t=0;t<l.length;t++){for(var r=l[t],o=!0,n=1;n<r.length;n++){var i=r[n];0!==a[i]&&(o=!1)}o&&(l.splice(t--,1),e=s(s.s=r[0]))}return e}var o={},a={app:0},l=[];function s(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=o,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(r,o,function(t){return e[t]}.bind(null,o));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],i=n.push.bind(n);n.push=t,n=n.slice();for(var u=0;u<n.length;u++)t(n[u]);var c=i;l.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},2126:function(e,t,r){},2695:function(e,t,r){},"2b5c":function(e,t,r){},"446e":function(e,t,r){},"47cd":function(e,t,r){"use strict";r("afb2")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var o=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",[r("router-link",{staticClass:"el-button el-button--primary",attrs:{to:"/register",type:"button",tag:"el-button"}},[e._v("注册")]),r("router-link",{staticClass:"el-button el-button--primary",attrs:{to:"/",type:"button",tag:"el-button"}},[e._v("登录")]),r("router-link",{staticClass:"el-button el-button--success",attrs:{to:"/list",type:"button",tag:"el-button"}},[e._v("列表")]),r("router-link",{staticClass:"el-button el-button--success",attrs:{to:"/create",type:"button",tag:"el-button"}},[e._v("记账")]),r("el-button",{attrs:{type:"danger",round:""},on:{click:e.handleQuit}},[e._v("退出登录")])],1),r("router-view")],1)},l=[],s=(r("99af"),{methods:{deleteCookie:function(e){document.cookie="".concat(e,"=; expires=").concat(new Date(0).toGMTString())},handleQuit:function(){this.deleteCookie("username"),console.log(document.cookie),this.$router.push({name:"index"})}}}),n=s,i=(r("034f"),r("2877")),u=Object(i["a"])(n,a,l,!1,null,null,null),c=u.exports,m=r("8c4f"),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("h2",[e._v("登录")]),r("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm2,"status-icon":"",rules:e.rules2,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名：",prop:"pass"}},[r("el-input",{attrs:{type:"username","auto-complete":"off"},model:{value:e.ruleForm2.pass,callback:function(t){e.$set(e.ruleForm2,"pass",t)},expression:"ruleForm2.pass"}})],1),r("div",{staticClass:"blank"}),r("el-form-item",{attrs:{label:"密码：",prop:"checkPass"}},[r("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.ruleForm2.checkPass,callback:function(t){e.$set(e.ruleForm2,"checkPass",t)},expression:"ruleForm2.checkPass"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm2")}}},[e._v("登录")]),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm2")}}},[e._v("重置")])],1)],1)],1)},d=[],f={data:function(){var e=this,t=function(t,r,o){""===r?o(new Error("请输入用户名")):(""!==e.ruleForm2.checkPass&&e.$refs.ruleForm2.validateField("checkPass"),o())},r=function(e,t,r){""===t?r(new Error("请输入密码")):r()};return{ruleForm2:{pass:"",checkPass:""},rules2:{pass:[{validator:t,trigger:"blur"}],checkPass:[{validator:r,trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.$http.post("/login",t.ruleForm2).then((function(e){"error"===e.data.type?t.$message.error("登录失败,请填写正确的用户名和密码"):(t.$message({message:e.data.message,type:"success"}),t.$router.push({name:"list"}))}))}))},resetForm:function(e){this.$refs[e].resetFields()}}},h=f,b=(r("ddc1"),Object(i["a"])(h,p,d,!1,null,"2450241a",null)),g=b.exports,v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"register"},[r("h2",[e._v("注册")]),r("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm2,"status-icon":"",rules:e.rules2,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名：",prop:"pass"}},[r("el-input",{attrs:{type:"username","auto-complete":"off"},model:{value:e.ruleForm2.username,callback:function(t){e.$set(e.ruleForm2,"username",t)},expression:"ruleForm2.username"}})],1),r("div",{staticClass:"blank"}),r("el-form-item",{attrs:{label:"密码：",prop:"checkPass"}},[r("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.ruleForm2.password,callback:function(t){e.$set(e.ruleForm2,"password",t)},expression:"ruleForm2.password"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm2")}}},[e._v("注册")]),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm2")}}},[e._v("重置")])],1)],1)],1)},y=[],F={data:function(){var e=this,t=function(t,r,o){""===r?o(new Error("请输入用户名")):(""!==e.ruleForm2.password&&e.$refs.ruleForm2.validateField("password"),o())},r=function(e,t,r){""===t?r(new Error("请输入密码")):r()};return{ruleForm2:{username:"",password:""},rules2:{username:[{validator:t,trigger:"blur"}],password:[{validator:r,trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.$http.post("/register",t.ruleForm2).then((function(e){console.log(e.data),t.$message({message:"注册成功",type:"success"}),t.$router.push("/")}))}))},resetForm:function(e){this.$refs[e].resetFields()}}},k=F,$=(r("47cd"),Object(i["a"])(k,v,y,!1,null,"3309dddc",null)),w=$.exports,_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{key:e.tableData.length,staticClass:"list"},[r("div",{staticClass:"user"},[e._v(" "+e._s(e.cookieVal)+" ")]),r("span",{staticStyle:{"font-size":"20px",color:"pink"}},[e._v("总支出："+e._s(this.sumMoney)+" 元")]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[r("el-table-column",{attrs:{fixed:"",prop:"id",label:"ID",width:"125"}}),r("el-table-column",{attrs:{prop:"name",label:"支出项目",width:"200"}}),r("el-table-column",{attrs:{prop:"type",label:"支出类型",width:"125"}}),r("el-table-column",{attrs:{prop:"money",label:"支出金额",width:"150"}}),r("el-table-column",{attrs:{prop:"date",label:"支出日期",width:"200"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"125"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.handleClick(t.row)}}},[r("i",{staticClass:"el-icon-delete"}),e._v("删除")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.handleEdit(t.row)}}},[r("i",{staticClass:"el-icon-edit"}),e._v("编辑")])]}}])})],1)],1)},x=[],C=(r("a9e3"),r("ac1f"),r("1276"),{methods:{getCookie:function(e){var t=document.cookie,r=t.split("=");return r[1]},fetch:function(){var e=this;this.$http.post("/list","").then((function(t){function r(e){var t=new Date(e),r=String(t.getFullYear())+"-",o=String(t.getMonth()+1)+"-",a=String(t.getDate());return r+o+a}if("00"===t.data.state)e.$message.error("未登录，请先登录！"),e.$router.push({name:"index"});else{for(var o=t.data,a=0;a<o.length;a++){var l={real_id:o[a]._id,id:String(a+1),name:o[a].itemName,type:o[a].itemType,money:o[a].itemPay+"元",date:r(o[a].itemDate)};e.tableData.push(l),e.sumMoney=e.sumMoney+Number(o[a].itemPay)}console.log("总价格：",e.sumMoney)}}))},handleClick:function(e){var t=this,r={id:e.real_id};this.$http.post("/delete",r).then((function(e){console.log(e.data),t.$message({message:"删除成功",type:"success"}),console.log("删除后的List"),console.log("------------"),t.tableData=[],t.fetch(),console.log("------------")}))},handleEdit:function(e){this.$router.push({name:"edit",params:{id:e.real_id}})}},data:function(){return{tableData:[],cookieVal:"",sumMoney:0}},created:function(){this.fetch(),this.cookieVal=this.getCookie("username"),this.cookieVal||(this.$message.error("未登录，请先登录！"),this.$router.push({name:"index"}))}}),P=C,S=(r("7d09"),Object(i["a"])(P,_,x,!1,null,"c11efb54",null)),O=S.exports,j=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"user"},[e._v(" "+e._s(e.cookieVal)+" ")]),r("div",{staticClass:"create"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"支出项目",prop:"name"}},[r("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"支出类型",prop:"type",size:"medium"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择类型"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[r("el-option",{attrs:{label:"衣",value:"衣"}}),r("el-option",{attrs:{label:"食",value:"食"}}),r("el-option",{attrs:{label:"住",value:"住"}}),r("el-option",{attrs:{label:"行",value:"行"}}),r("el-option",{attrs:{label:"其他",value:"其他"}})],1)],1),r("el-form-item",{attrs:{label:"支出金额",prop:"money"}},[r("el-input",{model:{value:e.ruleForm.money,callback:function(t){e.$set(e.ruleForm,"money",t)},expression:"ruleForm.money"}})],1),r("el-form-item",{attrs:{label:"支出日期",required:""}},[r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{prop:"date"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.ruleForm.date,callback:function(t){e.$set(e.ruleForm,"date",t)},expression:"ruleForm.date"}})],1)],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即创建")]),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)])},E=[],D={data:function(){return{ruleForm:{name:"",type:"",money:"",date:"",cookieVal:""},rules:{name:[{required:!0,message:"请输入支出项目",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择支出类型",trigger:"change"}],money:[{required:!0,message:"请输入支出金额",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],date:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}]}}},methods:{getCookie:function(e){var t=document.cookie,r=t.split("=");return r[1]},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.$http.post("/create",t.ruleForm).then((function(e){"00"===e.data.state?(t.$message.error("未登录，请先登录！"),t.$router.push({name:"index"})):(t.$message({message:"账单创建成功",type:"success"}),t.$router.push({name:"list"}))}))}))},resetForm:function(e){this.$refs[e].resetFields()}},created:function(){this.cookieVal=this.getCookie("username"),this.cookieVal||(this.$message.error("未登录，请先登录！"),this.$router.push({name:"index"}))}},M=D,q=(r("ceae"),Object(i["a"])(M,j,E,!1,null,"6ef3c3d6",null)),V=q.exports,T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"edit"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"支出项目",prop:"name"}},[r("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"支出类型",prop:"type",size:"medium"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择类型"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[r("el-option",{attrs:{label:"衣",value:"衣"}}),r("el-option",{attrs:{label:"食",value:"食"}}),r("el-option",{attrs:{label:"住",value:"住"}}),r("el-option",{attrs:{label:"行",value:"行"}}),r("el-option",{attrs:{label:"其他",value:"其他"}})],1)],1),r("el-form-item",{attrs:{label:"支出金额",prop:"money"}},[r("el-input",{model:{value:e.ruleForm.money,callback:function(t){e.$set(e.ruleForm,"money",t)},expression:"ruleForm.money"}})],1),r("el-form-item",{attrs:{label:"支出日期",required:""}},[r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{prop:"date"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.ruleForm.date,callback:function(t){e.$set(e.ruleForm,"date",t)},expression:"ruleForm.date"}})],1)],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("修改")]),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)},z=[],N={data:function(){return{ruleForm:{name:"",type:"",money:"",date:""},rules:{name:[{required:!0,message:"请输入支出项目",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择支出类型",trigger:"change"}],money:[{required:!0,message:"请输入支出金额",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],date:[]}}},methods:{fetch:function(){var e=this;this.$http.get("/edit/".concat(this.$route.params.id)).then((function(t){e.ruleForm={name:t.data.itemName,type:t.data.itemType,money:t.data.itemPay,date:t.data.itemDate},console.log("修改显示数组",e.ruleForm)}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.$http.post("/edit/".concat(t.$route.params.id),t.ruleForm).then((function(e){t.$message({message:"账单修改成功",type:"success"}),t.$router.push({name:"list"})}))}))},resetForm:function(e){this.$refs[e].resetFields()}},created:function(){this.fetch()}},J=N,L=(r("a97e"),Object(i["a"])(J,T,z,!1,null,"1fd99f02",null)),Q=L.exports;o["default"].use(m["a"]);var G=[{path:"/",name:"index",component:g},{path:"/register",name:"register",component:w},{path:"/list",name:"list",component:O},{path:"/create",name:"create",component:V},{path:"/edit/:id",name:"edit",component:Q}],I=new m["a"]({mode:"history",base:"/",routes:G}),R=I,U=r("5c96"),Y=r.n(U),A=(r("0fae"),r("bc3a")),B=r.n(A);o["default"].prototype.$http=B.a.create({baseURL:"http://8.129.39.175:3003/api",withCredentials:!0}),o["default"].use(Y.a),o["default"].config.productionTip=!1,new o["default"]({router:R,render:function(e){return e(c)}}).$mount("#app")},"7d09":function(e,t,r){"use strict";r("446e")},"85ec":function(e,t,r){},a97e:function(e,t,r){"use strict";r("2695")},afb2:function(e,t,r){},ceae:function(e,t,r){"use strict";r("2b5c")},ddc1:function(e,t,r){"use strict";r("2126")}});
//# sourceMappingURL=app.39974d35.js.map